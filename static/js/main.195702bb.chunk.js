(this.webpackJsonpimagebook=this.webpackJsonpimagebook||[]).push([[0],{22:function(t,e,i){},36:function(t,e,i){},37:function(t,e,i){},38:function(t,e,i){},39:function(t,e,i){},40:function(t,e,i){"use strict";i.r(e);var n,a,s=i(0),o=i(5),r=i.n(o),h=i(15),l=i.n(h),c=(i(22),i(1)),g=i(2),u=i(4),d=i(3),p=i(16),f=i.n(p),v=(i(36),i(37),r.a.forwardRef((function(t,e){return Object(s.jsxs)("div",{className:"page page-cover page-cover-"+t.pos,ref:e,"data-density":"hard",children:[!0===t.bookmark?Object(s.jsx)("img",{className:"bookmark",src:"/imagebook/bookmark.png",style:{filter:"invert(10%) sepia(96%) saturate(6344%) hue-rotate(1deg) brightness(121%) contrast(113%)"},alt:"k\xf6nyvjelz\u0151",title:"Kinyit\xe1s a k\xf6nyvjelz\u0151n\xe9l",onClick:t.onBookmark}):null,Object(s.jsx)("div",{className:"page-content",children:Object(s.jsx)("h2",{children:t.children})})]})}))),y=r.a.forwardRef((function(t,e){var i="page "+(t.no_animation?"no-animation":"");return Object(s.jsx)("div",{className:i,ref:e,"data-density":"soft"|t.density,children:Object(s.jsxs)("div",{className:"page-content",children:[void 0!==t.pageTitle?Object(s.jsx)("h2",{className:"page-header",children:t.pageTitle}):null,void 0!==t.image?Object(s.jsx)("div",{className:"page-image",children:Object(s.jsxs)("figure",{children:[Object(s.jsx)("img",{alt:t.imageCaption,src:t.image,onClick:function(i){console.log("props",t),console.log("ref",e),i.target.requestFullscreen().then((function(){}))},onLoad:function(t){t.target.style=t.target.width>t.target.height?"width: 100%":"height: 100%"}}),Object(s.jsx)("figcaption",{children:t.imageCaption})]})}):null,t.children?Object(s.jsx)("div",{className:"page-text",children:t.children}):null,Object(s.jsx)("div",{className:"page-footer",children:isNaN(t.pageNumber)?"":t.pageNumber})]})})})),m=function t(e){var i=this;Object(c.a)(this,t),this.routes=[],this.mode=null,this.root="/",this.add=function(t,e){return i.routes.push({path:t,cb:e}),i},this.remove=function(t){for(var e=0;e<i.routes.length;e+=1)if(i.routes[e].path===t)return i.routes.slice(e,1),i;return i},this.flush=function(){return i.routes=[],i},this.clearSlashes=function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")},this.getFragment=function(){var t="";if("history"===i.mode)t=(t=i.clearSlashes(decodeURI(window.location.pathname+window.location.search))).replace(/\?(.*)$/,""),t="/"!==i.root?t.replace(i.root,""):t;else{var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return i.clearSlashes(t)},this.navigate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"history"===i.mode?window.history.pushState(null,null,i.root+i.clearSlashes(t)):window.location.href="".concat(window.location.href.replace(/#(.*)$/,""),"#").concat(t),i},this.listen=function(){clearInterval(i.interval),i.interval=setInterval(i.interval,50)},this.interval=function(){i.current!==i.getFragment()&&(i.current=i.getFragment(),i.routes.some((function(t){var e=i.current.match(t.path);return!!e&&(e.shift(),t.cb.apply({},e),e)})))},this.mode=window.history.pushState?"history":"hash",e.mode&&(this.mode=e.mode),e.root&&(this.root=e.root),this.listen()},w=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t){var n;Object(c.a)(this,i),(n=e.call(this,t)).nextButtonClick=function(){n.setState((function(t,e){return{page:t.totalPage>t.page?t.page+1:t.page}}),(function(t){n.flipToPage()}))},n.prevButtonClick=function(){n.setState((function(t,e){return{page:0<t.page?t.page-1:t.page}}),(function(){n.flipToPage()}))},n.onPage=function(t){n.setState((function(e,i){return{page:t.data}}),(function(){n.state.router.navigate("/"+n.state.page)}))},n.onChangeOrientation=function(t){n.setState((function(e,i){return{orientation:t.data}}))},n.onChangeState=function(t){n.setState((function(e,i){return{state:t.data}}))},n.flipToPage=function(){console.log(n.state.page),n.flipBook.getPageFlip().flip(Number(n.state.page)+1)},n.addPageToBookmark=function(){n.setState((function(t,e){return{bookmark:n.state.page}}),(function(){localStorage.setItem("bookmark",n.state.bookmark)}))},n.openBookmark=function(){console.log(n.state),n.setState((function(t,e){return{page:n.state.bookmark}}),(function(){n.flipToPage()}))},n.navigateToPage=function(t){t.preventDefault(),n.setState((function(e,i){return{page:Number(t.target.hash.substring(1).split("/")[1])}}),(function(){n.flipToPage()}))};var a="hash",o=[Object(s.jsx)(v,{pos:"top",bookmark:!0,image:"/imagebook/h608.jpg",onBookmark:n.openBookmark,children:"Alim Adilov k\xe9pesk\xf6nyve"},0),Object(s.jsx)(y,{pageNumber:1,pageTitle:"\xd6n\xe9letrajz",children:Object(s.jsxs)("article",{style:{padding:"2%"},children:['Alim Adilov \xdczbegiszt\xe1n f\xf5v\xe1ros\xe1ban, Taskentben sz\xfcletett 1963-ban \xe9s gyerekkor\xe1ban elkezdett j\xe1rni m\xfbv\xe9szeti szakk\xf6rre, ahol Z\xf3ja Grigorevna kiv\xe1l\xf3 fest\xf5m\xfbv\xe9szn\xf5 tan\xedtotta. 8 \xe9ves iskolai v\xe9gzetts\xe9g ut\xe1n Taskentben 4 \xe9ves M\xfbv\xe9szeti technikumot v\xe9gzett. Katonai szolg\xe1lat ut\xe1n felv\xe9telizett az eur\xf3pai hir\xfb szentp\xe9terv\xe1ri "Repin" K\xe9pz\xf5m\xfbv\xe9szeti Akad\xe9miara \xe9s ott 6 \xe9vig tanult, k\xf6zben r\xe9szt vett csoportos ki\xe1ll\xedt\xe1sokban Szovjetuni\xf3ban \xe9s sz\xe1mos k\xfclf\xf6ldi orsz\xe1gban. Akad\xe9mia elv\xe9gz\xe9se ut\xe1n elutazott Londonba, ahol r\xe9szt vett a "Canvas" m\xfbv\xe9szeti tanfolyamban.',Object(s.jsx)("br",{}),"1993 \xf3ta hazankban \xe9l \xe9s alkot. 2004-t\xf5l a Magyar Alkotom\xfbv\xe9szek Orsz\xe1gos Egyes\xfclet\xe9nek tagja. T\xf6bbnyire vegyes technik\xe1val, vegyes t\xe9m\xe1kban dolgozik. M\xfbv\xe9sztelepeknek rendszeres tagja.",Object(s.jsx)("br",{}),'"Alim Adilov fest\xf5m\xfbv\xe9sz rohan\xf3 \xe9let\xfcnk el\xe9 olyan festm\xe9nyeket \xe1ll\xedt, melyekb\xf5l sug\xe1rzik a term\xe9szet var\xe1zsa \xe9s a Teremt\xf5 j\xf3s\xe1ga. K\xe9pei, mint b\xe1sty\xe1k dacolnak a h\xe1borg\xf3 vil\xe1g forgatag\xe1val, id\xf5k \xe9s korok m\xfal\xe1s\xe1val."',Object(s.jsx)("br",{}),"Csoportos ki\xe1llit\xe1sok: Szentp\xe9terv\xe1r, Moszkva, Rosztov, Taskent, Tokyo, Kuala Lumpur, Budapest, Debrecen, B\xe9k\xe9scsaba \xd6n\xe1ll\xf3 ki\xe1ll\xedt\xe1sok: London, B\xe9k\xe9scsaba, Miskolc, Debrecen, G\xf6d\xf6ll\xf5, Kecskem\xe9t, Budapest, Malaysia (Puchong), Kuala Lumpur \xc1lland\xf3 ki\xe1ll\xedt\xe1s: Madeira"]})},1),Object(s.jsx)(y,{pageNumber:2,pageTitle:"Tartalomjegyz\xe9k",children:Object(s.jsxs)("ol",{children:[Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#/1",onClick:n.navigateToPage,children:"\xd6n\xe9letrajz"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#/2",onClick:n.navigateToPage,children:"Tengerparton"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#/3",onClick:n.navigateToPage,children:"Cser\xe9ped\xe9nyek"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#/4",onClick:n.navigateToPage,children:"Vir\xe1gok az ablakban"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#/5",onClick:n.navigateToPage,children:"\xc1tj\xe1r\xf3"})})]})},2),Object(s.jsx)(y,{pageNumber:3,image:"/imagebook/h608.jpg",imageCaption:"Tengerparton"},3),Object(s.jsx)(y,{pageNumber:4,image:"/imagebook/h503.jpg",imageCaption:"Cser\xe9ped\xe9nyek"},4),Object(s.jsx)(y,{pageNumber:5,image:"/imagebook/h607.jpg",imageCaption:"Vir\xe1gok az ablakban"},5),Object(s.jsx)(y,{pageNumber:6,image:"/imagebook/f1014.jpg",imageCaption:"\xc1tj\xe1r\xf3"},6),Object(s.jsx)(v,{image:"/imagebook/h608.jpg",pos:"bottom"},7)];return n.state={bookmark:null,page:0,pages:o,orientation:"landscape",state:"read",totalPage:0,router:null,routingStrategy:a},n}return Object(g.a)(i,[{key:"componentDidMount",value:function(){var t=this,e=new m({mode:this.state.routingStrategy});console.log(e.getFragment());var i=0;this.isNumeric(e.getFragment())?i=Number(e.getFragment()):e.navigate("/0");var n=Number(localStorage.getItem("bookmark"));this.setState((function(a,s){return{totalPage:t.flipBook.getPageFlip().getPageCount(),page:i,bookmark:n,router:e}}),(function(){t.state.page>0&&t.flipToPage()}))}},{key:"isNumeric",value:function(t){return"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"book-container container-md",children:[Object(s.jsx)("button",{type:"button",className:"mt-1 btn btn-success",onClick:this.addPageToBookmark,title:"Oldal k\xf6nyvjelz\u0151z\xe9se",children:Object(s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-bookmark-plus",viewBox:"0 0 16 16",children:[Object(s.jsx)("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5V6H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V7H6a.5.5 0 0 1 0-1h1.5V4.5A.5.5 0 0 1 8 4z"}),Object(s.jsx)("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"})]})}),Object(s.jsx)("button",{type:"button",className:"mt-1 btn btn-danger",onClick:this.openBookmark,title:"Oldal kinyit\xe1sa a k\xf6nyvjelz\u0151h\xf6z",children:Object(s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-bookmark-plus",viewBox:"0 0 16 16",children:[Object(s.jsx)("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5V6H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V7H6a.5.5 0 0 1 0-1h1.5V4.5A.5.5 0 0 1 8 4z"}),Object(s.jsx)("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"})]})}),Object(s.jsx)(f.a,{width:550,height:733,size:"stretch",minWidth:315,minHeight:400,maxWidth:1e3,maxHeight:1533,maxShadowOpacity:.5,flippingTime:700,showCover:!0,mobileScrollSupport:!0,clickEventForward:["img","button","a"],drawShadow:!0,swipeDistance:0,useMouseEvents:!0,onFlip:this.onPage,onChangeOrientation:this.onChangeOrientation,onChangeState:this.onChangeState,className:"image-book",ref:function(e){return t.flipBook=e},children:this.state.pages})]})}}]),i}(r.a.Component),x=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,41)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,s=e.getLCP,o=e.getTTFB;i(t),n(t),a(t),s(t),o(t)}))},k=i(6);!function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT"}(n||(n={})),function(t){t.SOFT="soft",t.HARD="hard"}(a||(a={}));var b,P,S,O=function(){function t(e,i){Object(c.a)(this,t),this.state=void 0,this.render=void 0,this.orientation=void 0,this.createdDensity=void 0,this.nowDrawingDensity=void 0,this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=i,this.nowDrawingDensity=this.createdDensity,this.render=e}return Object(g.a)(t,[{key:"setDensity",value:function(t){this.createdDensity=t,this.nowDrawingDensity=t}},{key:"setDrawingDensity",value:function(t){this.nowDrawingDensity=t}},{key:"setPosition",value:function(t){this.state.position=t}},{key:"setAngle",value:function(t){this.state.angle=t}},{key:"setArea",value:function(t){this.state.area=t}},{key:"setHardDrawingAngle",value:function(t){this.state.hardDrawingAngle=t}},{key:"setHardAngle",value:function(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}},{key:"setOrientation",value:function(t){this.orientation=t}},{key:"getDrawingDensity",value:function(){return this.nowDrawingDensity}},{key:"getDensity",value:function(){return this.createdDensity}},{key:"getHardAngle",value:function(){return this.state.hardAngle}}]),t}(),T=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a){var s;return Object(c.a)(this,i),(s=e.call(this,t,a)).image=null,s.isLoad=!1,s.loadingAngle=0,s.image=new Image,s.image.src=n,s}return Object(g.a)(i,[{key:"draw",value:function(t){var e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),n=this.render.getRect().pageWidth,a=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();var s,o=Object(k.a)(this.state.area);try{for(o.s();!(s=o.n()).done;){var r=s.value;null!==r&&(r=this.render.convertToGlobal(r),e.lineTo(r.x-i.x,r.y-i.y))}}catch(h){o.e(h)}finally{o.f()}e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,n,a):this.drawLoader(e,{x:0,y:0},n,a),e.restore()}},{key:"simpleDraw",value:function(t){var e=this.render.getRect(),i=this.render.getContext(),a=e.pageWidth,s=e.height,o=t===n.RIGHT?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,o,r,a,s):this.drawLoader(i,{x:o,y:r},a,s)}},{key:"drawLoader",value:function(t,e,i,n){t.beginPath(),t.strokeStyle="rgb(200, 200, 200)",t.fillStyle="rgb(255, 255, 255)",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,n-1),t.stroke(),t.fill();var a={x:e.x+i/2,y:e.y+n/2};t.beginPath(),t.lineWidth=10,t.arc(a.x,a.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}},{key:"load",value:function(){var t=this;this.isLoad||(this.image.onload=function(){t.isLoad=!0})}},{key:"newTemporaryCopy",value:function(){return this}},{key:"getTemporaryCopy",value:function(){return this}},{key:"hideTemporaryCopy",value:function(){}}]),i}(O),R=function(){function t(){Object(c.a)(this,t)}return Object(g.a)(t,null,[{key:"GetDistanceBetweenTwoPoint",value:function(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"GetSegmentLength",value:function(e){return t.GetDistanceBetweenTwoPoint(e[0],e[1])}},{key:"GetAngleBetweenTwoLine",value:function(t,e){var i=t[0].y-t[1].y,n=e[0].y-e[1].y,a=t[1].x-t[0].x,s=e[1].x-e[0].x;return Math.acos((i*n+a*s)/(Math.sqrt(i*i+a*a)*Math.sqrt(n*n+s*s)))}},{key:"PointInRect",value:function(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}},{key:"GetRotatedPoint",value:function(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}},{key:"LimitPointToCircle",value:function(e,i,n){if(t.GetDistanceBetweenTwoPoint(e,n)<=i)return n;var a=e.x,s=e.y,o=n.x,r=n.y,h=Math.sqrt(Math.pow(i,2)*Math.pow(a-o,2)/(Math.pow(a-o,2)+Math.pow(s-r,2)))+a;n.x<0&&(h*=-1);var l=(h-a)*(s-r)/(a-o)+s;return a-o+s===0&&(l=i),{x:h,y:l}}},{key:"GetIntersectBetweenTwoSegment",value:function(e,i,n){return t.PointInRect(e,t.GetIntersectBeetwenTwoLine(i,n))}},{key:"GetIntersectBeetwenTwoLine",value:function(t,e){var i=t[0].y-t[1].y,n=e[0].y-e[1].y,a=t[1].x-t[0].x,s=e[1].x-e[0].x,o=t[0].x*t[1].y-t[1].x*t[0].y,r=e[0].x*e[1].y-e[1].x*e[0].y,h=i*r-n*o,l=a*r-s*o,c=-(o*s-r*a)/(i*s-n*a),g=-(i*r-n*o)/(i*s-n*a);if(isFinite(c)&&isFinite(g))return{x:c,y:g};if(Math.abs(h-l)<.1)throw new Error("Segment included");return null}},{key:"GetCordsFromTwoPoint",value:function(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),a=Math.max(i,n),s=[t];function o(t,e,i,n,a){return e>t?t+a*(i/n):e<t?t-a*(i/n):t}for(var r=1;r<=a;r+=1)s.push({x:o(t.x,e.x,i,a,r),y:o(t.y,e.y,n,a,r)});return s}}]),t}(),j=function(){function t(e,i,n,a){Object(c.a)(this,t),this.direction=e,this.corner=i,this.angle=void 0,this.position=void 0,this.rect=void 0,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=void 0,this.pageHeight=void 0,this.pageWidth=parseInt(n,10),this.pageHeight=parseInt(a,10)}return Object(g.a)(t,[{key:"calc",value:function(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(e){return!1}}},{key:"getFlippingClipArea",value:function(){var t=[],e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||this.corner===P.BOTTOM)&&t.push(this.rect.bottomLeft),t}},{key:"getBottomClipArea",value:function(){var t=[];return t.push(this.topIntersectPoint),this.corner===P.TOP?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?R.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):this.corner===P.TOP&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}},{key:"getAngle",value:function(){return this.direction===b.FORWARD?-this.angle:this.angle}},{key:"getRect",value:function(){return this.rect}},{key:"getPosition",value:function(){return this.position}},{key:"getActiveCorner",value:function(){return this.direction===b.FORWARD?this.rect.topLeft:this.rect.topRight}},{key:"getDirection",value:function(){return this.direction}},{key:"getFlippingProgress",value:function(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}},{key:"getCorner",value:function(){return this.corner}},{key:"getBottomPagePosition",value:function(){return this.direction===b.BACK?{x:this.pageWidth,y:0}:{x:0,y:0}}},{key:"getShadowStartPoint",value:function(){return this.corner===P.TOP?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}},{key:"getShadowAngle",value:function(){var t=R.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===b.FORWARD?t:Math.PI-t}},{key:"calcAngleAndPosition",value:function(t){var e=t;if(this.updateAngleAndGeometry(e),e=this.corner===P.TOP?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error("Point is too small");return e}},{key:"updateAngleAndGeometry",value:function(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}},{key:"calculateAngle",value:function(t){var e=this.pageWidth-t.x+1,i=this.corner===P.BOTTOM?this.pageHeight-t.y:t.y,n=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(n=-n);var a=Math.PI-n;if(!isFinite(n)||a>=0&&a<.003)throw new Error("The G point is too small");return this.corner===P.BOTTOM&&(n=-n),n}},{key:"getPageRect",value:function(t){return this.corner===P.TOP?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}},{key:"getRectFromBasePoint",value:function(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}},{key:"getRotatedPoint",value:function(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}},{key:"calculateIntersectPoint",value:function(t){var e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner===P.TOP?(this.topIntersectPoint=R.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=R.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=R.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=R.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=R.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=R.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}},{key:"checkPositionAtCenterLine",value:function(t,e,i){var n=t,a=R.LimitPointToCircle(e,this.pageWidth,n);n!==a&&(n=a,this.updateAngleAndGeometry(n));var s=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2)),o=this.rect.bottomRight,r=this.rect.topLeft;if(this.corner===P.BOTTOM&&(o=this.rect.topRight,r=this.rect.bottomLeft),o.x<=0){var h=R.LimitPointToCircle(i,s,r);h!==n&&(n=h,this.updateAngleAndGeometry(n))}return n}},{key:"getSegmentToShadowLine",value:function(){var t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}]),t}();!function(t){t[t.FORWARD=0]="FORWARD",t[t.BACK=1]="BACK"}(b||(b={})),function(t){t.TOP="top",t.BOTTOM="bottom"}(P||(P={})),function(t){t.USER_FOLD="user_fold",t.FOLD_CORNER="fold_corner",t.FLIPPING="flipping",t.READ="read"}(S||(S={}));var C,D=function(){function t(e,i){Object(c.a)(this,t),this.render=void 0,this.app=void 0,this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=S.READ,this.render=e,this.app=i}return Object(g.a)(t,[{key:"fold",value:function(t){this.setState(S.USER_FOLD),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}},{key:"flip",value:function(t){if(null!==this.calc&&this.render.finishAnimation(),this.start(t)){var e=this.getBoundsRect();this.setState(S.FLIPPING);var i=e.height/10,n=this.calc.getCorner()===P.BOTTOM?e.height-i:i,a=this.calc.getCorner()===P.BOTTOM?e.height:0;this.calc.calc({x:e.pageWidth-i,y:n}),this.animateFlippingTo({x:e.pageWidth-i,y:n},{x:-e.pageWidth,y:a},!0)}}},{key:"start",value:function(t){this.reset();var e=this.render.convertToBook(t),i=this.getBoundsRect(),n=this.getDirectionByPoint(e),s=e.y>=i.height/2?P.BOTTOM:P.TOP;if(!this.checkDirection(n))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(n),this.bottomPage=this.app.getPageCollection().getBottomPage(n),this.render.getOrientation()===A.LANDSCAPE)if(n===b.BACK){var o=this.app.getPageCollection().nextBy(this.flippingPage);null!==o&&this.flippingPage.getDensity()!==o.getDensity()&&(this.flippingPage.setDrawingDensity(a.HARD),o.setDrawingDensity(a.HARD))}else{var r=this.app.getPageCollection().prevBy(this.flippingPage);null!==r&&this.flippingPage.getDensity()!==r.getDensity()&&(this.flippingPage.setDrawingDensity(a.HARD),r.setDrawingDensity(a.HARD))}return this.render.setDirection(n),this.calc=new j(n,s,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(h){return!1}}},{key:"do",value:function(t){if(null!==this.calc&&this.calc.calc(t)){var e=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===b.FORWARD?this.flippingPage.setHardAngle(90*(200-2*e)/100):this.flippingPage.setHardAngle(-90*(200-2*e)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),e,this.calc.getDirection())}}},{key:"flipToPage",value:function(t,e){var i=this.app.getPageCollection().getCurrentSpreadIndex(),n=this.app.getPageCollection().getSpreadIndexByPage(t);try{n>i&&(this.app.getPageCollection().setCurrentSpreadIndex(n-1),this.flipNext(e)),n<i&&(this.app.getPageCollection().setCurrentSpreadIndex(n+1),this.flipPrev(e))}catch(a){}}},{key:"flipNext",value:function(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth,y:t===P.TOP?1:this.render.getRect().height-2})}},{key:"flipPrev",value:function(t){this.flip({x:10,y:t===P.TOP?1:this.render.getRect().height-2})}},{key:"stopMove",value:function(){if(null!==this.calc){var t=this.calc.getPosition(),e=this.getBoundsRect(),i=this.calc.getCorner()===P.BOTTOM?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}}},{key:"showCorner",value:function(t){if(this.checkState(S.READ,S.FOLD_CORNER)){var e=this.getBoundsRect(),i=e.pageWidth,n=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,a=this.render.convertToBook(t);if(a.x>0&&a.y>0&&a.x<e.width&&a.y<e.height&&(a.x<n||a.x>e.width-n)&&(a.y<n||a.y>e.height-n))if(null===this.calc){if(!this.start(t))return;this.setState(S.FOLD_CORNER),this.calc.calc({x:i-1,y:1});var s=this.calc.getCorner()===P.BOTTOM?e.height-1:1,o=this.calc.getCorner()===P.BOTTOM?e.height-50:50;this.animateFlippingTo({x:i-1,y:s},{x:i-50,y:o},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(S.READ),this.render.finishAnimation(),this.stopMove()}}},{key:"animateFlippingTo",value:function(t,e,i){var n,a=this,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=R.GetCordsFromTwoPoint(t,e),r=[],h=Object(k.a)(o);try{var l=function(){var t=n.value;r.push((function(){return a.do(t)}))};for(h.s();!(n=h.n()).done;)l()}catch(g){h.e(g)}finally{h.f()}var c=this.getAnimationDuration(o.length);this.render.startAnimation(r,c,(function(){a.calc&&(i&&(a.calc.getDirection()===b.BACK?a.app.turnToPrevPage():a.app.turnToNextPage()),s&&(a.render.setBottomPage(null),a.render.setFlippingPage(null),a.render.clearShadow(),a.setState(S.READ),a.reset()))}))}},{key:"getCalculation",value:function(){return this.calc}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){this.state!==t&&(this.app.updateState(t),this.state=t)}},{key:"getDirectionByPoint",value:function(t){var e=this.getBoundsRect();if(this.render.getOrientation()===A.PORTRAIT){if(t.x-e.pageWidth<=e.width/5)return b.BACK}else if(t.x<e.width/2)return b.BACK;return b.FORWARD}},{key:"getAnimationDuration",value:function(t){var e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}},{key:"checkDirection",value:function(t){return t===b.FORWARD?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}},{key:"reset",value:function(){this.calc=null,this.flippingPage=null,this.bottomPage=null}},{key:"getBoundsRect",value:function(){return this.render.getRect()}},{key:"checkState",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=0,a=e;n<a.length;n++){var s=a[n];if(this.state===s)return!0}return!1}}]),t}();!function(t){t.FIXED="fixed",t.STRETCH="stretch"}(C||(C={}));var A,I=function(){function t(){Object(c.a)(this,t),this._default={startPage:0,size:C.FIXED,width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!1,useMouseEvents:!0,showPageCorners:!0}}return Object(g.a)(t,[{key:"getSettings",value:function(t){var e=this._default;if(Object.assign(e,t),e.size!==C.STRETCH&&e.size!==C.FIXED)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(e.width<=0||e.height<=0)throw new Error("Invalid width or height");if(e.flippingTime<=0)throw new Error("Invalid flipping time");return e.size===C.STRETCH?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}]),t}();!function(t){t.PORTRAIT="portrait",t.LANDSCAPE="landscape"}(A||(A={}));var F=function(){function t(e,i){Object(c.a)(this,t),this.setting=void 0,this.app=void 0,this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=i,this.app=e;var n=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==n.exec(window.navigator.userAgent)}return Object(g.a)(t,[{key:"render",value:function(t){if(null!==this.animation){var e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}},{key:"start",value:function(){var t=this;this.update();requestAnimationFrame((function e(i){t.render(i),requestAnimationFrame(e)}))}},{key:"startAnimation",value:function(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}},{key:"finishAnimation",value:function(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}},{key:"update",value:function(){this.boundsRect=null;var t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}},{key:"calculateBoundsRect",value:function(){var t=A.LANDSCAPE,e=this.getBlockWidth(),i=e/2,n=this.getBlockHeight()/2,a=this.setting.width/this.setting.height,s=this.setting.width,o=this.setting.height,r=i-s;return this.setting.size===C.STRETCH?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=A.PORTRAIT),(s=t===A.PORTRAIT?this.getBlockWidth():this.getBlockWidth()/2)>this.setting.maxWidth&&(s=this.setting.maxWidth),(o=s/a)>this.getBlockHeight()&&(s=(o=this.getBlockHeight())*a),r=t===A.PORTRAIT?i-s/2-s:i-s):e<2*s&&this.app.getSettings().usePortrait&&(t=A.PORTRAIT,r=i-s/2-s),this.boundsRect={left:r,top:n-o/2,width:2*s,height:o,pageWidth:s},t}},{key:"setShadowData",value:function(t,e,i,n){if(this.app.getSettings().drawShadow){var a=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*a/100/100,direction:n,progress:2*i}}}},{key:"clearShadow",value:function(){this.shadow=null}},{key:"getBlockWidth",value:function(){return this.app.getUI().getDistElement().offsetWidth}},{key:"getBlockHeight",value:function(){return this.app.getUI().getDistElement().offsetHeight}},{key:"getDirection",value:function(){return this.direction}},{key:"getRect",value:function(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}},{key:"getSettings",value:function(){return this.app.getSettings()}},{key:"getOrientation",value:function(){return this.orientation}},{key:"setPageRect",value:function(t){this.pageRect=t}},{key:"setDirection",value:function(t){this.direction=t}},{key:"setRightPage",value:function(t){null!==t&&t.setOrientation(n.RIGHT),this.rightPage=t}},{key:"setLeftPage",value:function(t){null!==t&&t.setOrientation(n.LEFT),this.leftPage=t}},{key:"setBottomPage",value:function(t){null!==t&&t.setOrientation(this.direction===b.BACK?n.LEFT:n.RIGHT),this.bottomPage=t}},{key:"setFlippingPage",value:function(t){null!==t&&t.setOrientation(this.direction===b.FORWARD&&this.orientation!==A.PORTRAIT?n.LEFT:n.RIGHT),this.flippingPage=t}},{key:"convertToBook",value:function(t){var e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}},{key:"isSafari",value:function(){return this.safari}},{key:"convertToPage",value:function(t,e){e||(e=this.direction);var i=this.getRect();return{x:e===b.FORWARD?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}},{key:"convertToGlobal",value:function(t,e){if(e||(e=this.direction),null==t)return null;var i=this.getRect();return{x:e===b.FORWARD?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}},{key:"convertRectToGlobal",value:function(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}]),t}(),L=function(){function t(e,i){Object(c.a)(this,t),this.app=void 0,this.render=void 0,this.isShowCover=void 0,this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=i,this.app=e,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}return Object(g.a)(t,[{key:"destroy",value:function(){this.pages=[]}},{key:"createSpread",value:function(){this.landscapeSpread=[],this.portraitSpread=[];for(var t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);var e=0;this.isShowCover&&(this.pages[0].setDensity(a.HARD),this.landscapeSpread.push([e]),e++);for(var i=e;i<this.pages.length;i+=2)i<this.pages.length-1?this.landscapeSpread.push([i,i+1]):(this.landscapeSpread.push([i]),this.pages[i].setDensity(a.HARD))}},{key:"getSpread",value:function(){return this.render.getOrientation()===A.LANDSCAPE?this.landscapeSpread:this.portraitSpread}},{key:"getSpreadIndexByPage",value:function(t){for(var e=this.getSpread(),i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}},{key:"getPageCount",value:function(){return this.pages.length}},{key:"getPages",value:function(){return this.pages}},{key:"getPage",value:function(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error("Invalid page number")}},{key:"nextBy",value:function(t){var e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}},{key:"prevBy",value:function(t){var e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}},{key:"getFlippingPage",value:function(t){var e=this.currentSpreadIndex;if(this.render.getOrientation()===A.PORTRAIT)return t===b.FORWARD?this.pages[e].newTemporaryCopy():this.pages[e-1];var i=t===b.FORWARD?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||t===b.FORWARD?this.pages[i[0]]:this.pages[i[1]]}},{key:"getBottomPage",value:function(t){var e=this.currentSpreadIndex;if(this.render.getOrientation()===A.PORTRAIT)return t===b.FORWARD?this.pages[e+1]:this.pages[e-1];var i=t===b.FORWARD?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:t===b.FORWARD?this.pages[i[1]]:this.pages[i[0]]}},{key:"showNext",value:function(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}},{key:"showPrev",value:function(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}},{key:"getCurrentPageIndex",value:function(){return this.currentPageIndex}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.currentPageIndex),!(t<0||t>=this.pages.length)){var e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}}},{key:"getCurrentSpreadIndex",value:function(){return this.currentSpreadIndex}},{key:"setCurrentSpreadIndex",value:function(t){if(!(t>=0&&t<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=t}},{key:"showSpread",value:function(){var t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):this.render.getOrientation()===A.LANDSCAPE&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}]),t}(),M=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a){var s;return Object(c.a)(this,i),(s=e.call(this,t,n)).imagesHref=void 0,s.imagesHref=a,s}return Object(g.a)(i,[{key:"load",value:function(){var t,e=Object(k.a)(this.imagesHref);try{for(e.s();!(t=e.n()).done;){var i=t.value,n=new T(this.render,i,a.SOFT);n.load(),this.pages.push(n)}}catch(s){e.e(s)}finally{e.f()}this.createSpread()}}]),i}(L),B=i(8),E=i(7),H=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a){var s;return Object(c.a)(this,i),(s=e.call(this,t,a)).element=void 0,s.copiedElement=null,s.temporaryCopy=null,s.isLoad=!1,s.element=n,s.element.classList.add("stf__item"),s.element.classList.add("--"+a),s}return Object(g.a)(i,[{key:"newTemporaryCopy",value:function(){return this.nowDrawingDensity===a.HARD?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new i(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}},{key:"getTemporaryCopy",value:function(){return this.temporaryCopy}},{key:"hideTemporaryCopy",value:function(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}},{key:"draw",value:function(t){var e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),n=this.render.getRect().pageWidth,s=this.render.getRect().height;this.element.classList.remove("--simple");var o="\n            display: block;\n            z-index: ".concat(this.element.style.zIndex,";\n            left: 0;\n            top: 0;\n            width: ").concat(n,"px;\n            height: ").concat(s,"px;\n        ");e===a.HARD?this.drawHard(o):this.drawSoft(i,o)}},{key:"drawHard",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,a=t+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(this.orientation===n.LEFT?"transform-origin: ".concat(this.render.getRect().pageWidth,"px 0; \n                   transform: translate3d(0, 0, 0) rotateY(").concat(i,"deg);"):"transform-origin: 0 0; \n                   transform: translate3d(".concat(e,"px, 0, 0) rotateY(").concat(i,"deg);"));this.element.style.cssText=a}},{key:"drawSoft",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="polygon( ",a=Object(k.a)(this.state.area);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(null!==s){var o=this.render.getDirection()===b.BACK?{x:-s.x+this.state.position.x,y:s.y-this.state.position.y}:{x:s.x-this.state.position.x,y:s.y-this.state.position.y};n+=(o=R.GetRotatedPoint(o,{x:0,y:0},this.state.angle)).x+"px "+o.y+"px, "}}}catch(h){a.e(h)}finally{a.f()}n=n.slice(0,-2);var r=i+"transform-origin: 0 0; clip-path: ".concat(n+=")","; -webkit-clip-path: ").concat(n,";")+(this.render.isSafari()&&0===this.state.angle?"transform: translate(".concat(t.x,"px, ").concat(t.y,"px);"):"transform: translate3d(".concat(t.x,"px, ").concat(t.y,"px, 0) rotate(").concat(this.state.angle,"rad);"));this.element.style.cssText=r}},{key:"simpleDraw",value:function(t){var e=this.render.getRect(),i=e.pageWidth,a=e.height,s=t===n.RIGHT?e.left+e.pageWidth:e.left,o=e.top;this.element.classList.add("--simple"),this.element.style.cssText="\n            position: absolute; \n            display: block; \n            height: ".concat(a,"px; \n            left: ").concat(s,"px; \n            top: ").concat(o,"px; \n            width: ").concat(i,"px; \n            z-index: ").concat(this.render.getSettings().startZIndex+1,";")}},{key:"getElement",value:function(){return this.element}},{key:"load",value:function(){this.isLoad=!0}},{key:"setOrientation",value:function(t){Object(B.a)(Object(E.a)(i.prototype),"setOrientation",this).call(this,t),this.element.classList.remove("--left","--right"),this.element.classList.add(t===n.RIGHT?"--right":"--left")}},{key:"setDrawingDensity",value:function(t){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+t),Object(B.a)(Object(E.a)(i.prototype),"setDrawingDensity",this).call(this,t)}}]),i}(O),W=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a,s){var o;return Object(c.a)(this,i),(o=e.call(this,t,n)).element=void 0,o.pagesElement=void 0,o.element=a,o.pagesElement=s,o}return Object(g.a)(i,[{key:"load",value:function(){var t,e=Object(k.a)(this.pagesElement);try{for(e.s();!(t=e.n()).done;){var i=t.value,n=new H(this.render,i,"hard"===i.dataset.density?a.HARD:a.SOFT);n.load(),this.pages.push(n)}}catch(s){e.e(s)}finally{e.f()}this.createSpread()}}]),i}(L),z=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a){var s;return Object(c.a)(this,i),(s=e.call(this,t,n)).canvas=void 0,s.ctx=void 0,s.canvas=a,s.ctx=a.getContext("2d"),s}return Object(g.a)(i,[{key:"getContext",value:function(){return this.ctx}},{key:"drawFrame",value:function(){this.clear(),this.orientation!==A.PORTRAIT&&null!=this.leftPage&&this.leftPage.simpleDraw(n.LEFT),null!=this.rightPage&&this.rightPage.simpleDraw(n.RIGHT),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());var t=this.getRect();this.orientation===A.PORTRAIT&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}},{key:"drawBookShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath();var e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);var i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);var n=this.ctx.createLinearGradient(0,0,e,0);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),n.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),n.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),n.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),n.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}},{key:"drawOuterShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);var e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===b.FORWARD?(this.ctx.translate(0,-100),i.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),i.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}},{key:"drawInnerShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath();var e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var n=3*this.shadow.width/4,a=this.ctx.createLinearGradient(0,0,n,0);this.shadow.direction===b.FORWARD?(this.ctx.translate(-n,-100),a.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),a.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),a.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),a.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=a,this.ctx.fillRect(0,0,n,2*t.height),this.ctx.restore()}},{key:"clear",value:function(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}]),i}(F),N=function(){function t(e,i,n){var a=this;Object(c.a)(this,t),this.app=void 0,this.wrapper=void 0,this.distElement=void 0,this.touchPoint=null,this.swipeTimeout=250,this.swipeDistance=void 0,this.onResize=function(){a.update()},this.onMouseDown=function(t){if(a.checkTarget(t.target)){var e=a.getMousePos(t.clientX,t.clientY);a.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=function(t){if(a.checkTarget(t.target)&&t.changedTouches.length>0){var e=t.changedTouches[0],i=a.getMousePos(e.clientX,e.clientY);a.touchPoint={point:i,time:Date.now()},setTimeout((function(){null!==a.touchPoint&&a.app.startUserTouch(i)}),a.swipeTimeout),a.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=function(t){var e=a.getMousePos(t.clientX,t.clientY);a.app.userStop(e)},this.onMouseMove=function(t){var e=a.getMousePos(t.clientX,t.clientY);a.app.userMove(e,!1)},this.onTouchMove=function(t){if(t.changedTouches.length>0){var e=t.changedTouches[0],i=a.getMousePos(e.clientX,e.clientY);a.app.getSettings().mobileScrollSupport?(null!==a.touchPoint&&(Math.abs(a.touchPoint.point.x-i.x)>10||a.app.getState()!==S.READ)&&t.cancelable&&a.app.userMove(i,!0),a.app.getState()!==S.READ&&t.preventDefault()):a.app.userMove(i,!0)}},this.onTouchEnd=function(t){if(t.changedTouches.length>0){var e=t.changedTouches[0],i=a.getMousePos(e.clientX,e.clientY),n=!1;if(null!==a.touchPoint){var s=i.x-a.touchPoint.point.x,o=Math.abs(i.y-a.touchPoint.point.y);Math.abs(s)>a.swipeDistance&&o<2*a.swipeDistance&&Date.now()-a.touchPoint.time<a.swipeTimeout&&(s>0?a.app.flipPrev(a.touchPoint.point.y<a.app.getRender().getRect().height/2?P.TOP:P.BOTTOM):a.app.flipNext(a.touchPoint.point.y<a.app.getRender().getRect().height/2?P.TOP:P.BOTTOM),n=!0),a.touchPoint=null}a.app.userStop(i,n)}},e.classList.add("stf__parent"),e.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=e.querySelector(".stf__wrapper"),this.app=i;var s=this.app.getSettings().usePortrait?1:2;e.style.minWidth=n.minWidth*s+"px",e.style.minHeight=n.minHeight+"px",n.size===C.FIXED&&(e.style.minWidth=n.width*s+"px",e.style.minHeight=n.height+"px"),n.autoSize&&(e.style.width="100%",e.style.maxWidth=2*n.maxWidth+"px"),e.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=n.swipeDistance}return Object(g.a)(t,[{key:"destroy",value:function(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}},{key:"getDistElement",value:function(){return this.distElement}},{key:"getWrapper",value:function(){return this.wrapper}},{key:"setOrientationStyle",value:function(t){this.wrapper.classList.remove("--portrait","--landscape"),t===A.PORTRAIT?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}},{key:"removeHandlers",value:function(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}},{key:"setHandlers",value:function(){this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}},{key:"getMousePos",value:function(t,e){var i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}},{key:"checkTarget",value:function(t){return!0!==this.app.getSettings().clickEventForward&&(!Array.isArray(this.app.getSettings().clickEventForward)||!this.app.getSettings().clickEventForward.includes(t.tagName.toLowerCase()))}}]),t}(),G=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a,s){var o;Object(c.a)(this,i),(o=e.call(this,t,n,a)).wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),o.distElement=t.querySelector(".stf__block");var r,h=Object(k.a)(s);try{for(h.s();!(r=h.n()).done;){var l=r.value;o.distElement.appendChild(l)}}catch(g){h.e(g)}finally{h.f()}return o.setHandlers(),o}return Object(g.a)(i,[{key:"updateItems",value:function(t){this.removeHandlers(),this.distElement.innerHTML="";var e,i=Object(k.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.distElement.appendChild(n)}}catch(a){i.e(a)}finally{i.f()}this.setHandlers()}},{key:"update",value:function(){this.app.getRender().update()}}]),i}(N),_=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a){var s;return Object(c.a)(this,i),(s=e.call(this,t,n,a)).canvas=void 0,s.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',s.canvas=t.querySelectorAll("canvas")[0],s.distElement=s.canvas,s.resizeCanvas(),s.setHandlers(),s}return Object(g.a)(i,[{key:"resizeCanvas",value:function(){var t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue("width"),10),i=parseInt(t.getPropertyValue("height"),10);this.canvas.width=e,this.canvas.height=i}},{key:"getCanvas",value:function(){return this.canvas}},{key:"update",value:function(){this.resizeCanvas(),this.app.getRender().update()}}]),i}(N),U=function(){function t(){Object(c.a)(this,t),this.events=new Map}return Object(g.a)(t,[{key:"on",value:function(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}},{key:"off",value:function(t){this.events.delete(t)}},{key:"trigger",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.events.has(t)){var n,a=Object(k.a)(this.events.get(t));try{for(a.s();!(n=a.n()).done;){var s=n.value;s({data:i,object:e})}}catch(o){a.e(o)}finally{a.f()}}}}]),t}(),K=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n,a){var s;return Object(c.a)(this,i),(s=e.call(this,t,n)).element=void 0,s.items=void 0,s.outerShadow=null,s.innerShadow=null,s.hardShadow=null,s.hardInnerShadow=null,s.element=a,s.createShadows(),s}return Object(g.a)(i,[{key:"createShadows",value:function(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}},{key:"clearShadow",value:function(){Object(B.a)(Object(E.a)(i.prototype),"clearShadow",this).call(this),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}},{key:"drawHardInnerShadow",value:function(){var t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress,i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);var n="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+5).toString(10),";\n            width: ").concat(i,"px;\n            height: ").concat(t.height,"px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity*e/100,") 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ").concat(t.left+t.width/2,"px;\n            transform-origin: 0 0;\n        ");n+=this.getDirection()===b.FORWARD&&this.shadow.progress>100||this.getDirection()===b.BACK&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=n}},{key:"drawHardOuterShadow",value:function(){var t=this.getRect(),e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);var i="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+4).toString(10),";\n            width: ").concat(e,"px;\n            height: ").concat(t.height,"px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%, rgba(0, 0, 0, 0) 100%);\n            left: ").concat(t.left+t.width/2,"px;\n            transform-origin: 0 0;\n        ");i+=this.getDirection()===b.FORWARD&&this.shadow.progress>100||this.getDirection()===b.BACK&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=i}},{key:"drawInnerShadow",value:function(){for(var t=this.getRect(),e=3*this.shadow.width/4,i=this.getDirection()===b.FORWARD?e:0,n=this.getDirection()===b.FORWARD?"to left":"to right",a=this.convertToGlobal(this.shadow.pos),s=this.shadow.angle+3*Math.PI/2,o="polygon( ",r=0,h=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];r<h.length;r++){var l=h[r],c=this.getDirection()===b.BACK?{x:-l.x+this.shadow.pos.x,y:l.y-this.shadow.pos.y}:{x:l.x-this.shadow.pos.x,y:l.y-this.shadow.pos.y};o+=(c=R.GetRotatedPoint(c,{x:i,y:100},s)).x+"px "+c.y+"px, "}o=o.slice(0,-2),o+=")";var g="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(e,"px;\n            height: ").concat(2*t.height,"px;\n            background: linear-gradient(").concat(n,",\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ").concat(i,"px 100px;\n            transform: translate3d(").concat(a.x-i,"px, ").concat(a.y-100,"px, 0) rotate(").concat(s,"rad);\n            clip-path: ").concat(o,";\n            -webkit-clip-path: ").concat(o,";\n        ");this.innerShadow.style.cssText=g}},{key:"drawOuterShadow",value:function(){for(var t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,n=this.getDirection()===b.BACK?this.shadow.width:0,a=this.getDirection()===b.FORWARD?"to right":"to left",s="polygon( ",o=0,r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];o<r.length;o++){var h=r[o];if(null!==h){var l=this.getDirection()===b.BACK?{x:-h.x+this.shadow.pos.x,y:h.y-this.shadow.pos.y}:{x:h.x-this.shadow.pos.x,y:h.y-this.shadow.pos.y};s+=(l=R.GetRotatedPoint(l,{x:n,y:100},i)).x+"px "+l.y+"px, "}}s=s.slice(0,-2),s+=")";var c="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(this.shadow.width,"px;\n            height: ").concat(2*t.height,"px;\n            background: linear-gradient(").concat(a,", rgba(0, 0, 0, ").concat(this.shadow.opacity,"), rgba(0, 0, 0, 0));\n            transform-origin: ").concat(n,"px 100px;\n            transform: translate3d(").concat(e.x-n,"px, ").concat(e.y-100,"px, 0) rotate(").concat(i,"rad);\n            clip-path: ").concat(s,";\n            -webkit-clip-path: ").concat(s,";\n        ");this.outerShadow.style.cssText=c}},{key:"drawLeftPage",value:function(){this.orientation!==A.PORTRAIT&&null!==this.leftPage&&(this.direction===b.BACK&&null!==this.flippingPage&&this.flippingPage.getDrawingDensity()===a.HARD?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(n.LEFT))}},{key:"drawRightPage",value:function(){null!==this.rightPage&&(this.direction===b.FORWARD&&null!==this.flippingPage&&this.flippingPage.getDrawingDensity()===a.HARD?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(n.RIGHT))}},{key:"drawBottomPage",value:function(){if(null!==this.bottomPage){var t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;this.orientation===A.PORTRAIT&&this.direction===b.BACK||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}}},{key:"drawFrame",value:function(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(this.flippingPage.getDrawingDensity()===a.SOFT?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}},{key:"clear",value:function(){var t,e=Object(k.a)(this.app.getPageCollection().getPages());try{for(e.s();!(t=e.n()).done;){var i=t.value;i!==this.leftPage&&i!==this.rightPage&&i!==this.flippingPage&&i!==this.bottomPage&&(i.getElement().style.cssText="display: none"),i.getTemporaryCopy()!==this.flippingPage&&i.hideTemporaryCopy()}}catch(n){e.e(n)}finally{e.f()}}},{key:"update",value:function(){Object(B.a)(Object(E.a)(i.prototype),"update",this).call(this),null!==this.rightPage&&this.rightPage.setOrientation(n.RIGHT),null!==this.leftPage&&this.leftPage.setOrientation(n.LEFT)}}]),i}(F),q=(i(38),function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(t,n){var a;return Object(c.a)(this,i),(a=e.call(this)).mousePosition=void 0,a.isUserTouch=!1,a.isUserMove=!1,a.setting=null,a.block=void 0,a.pages=null,a.flipController=void 0,a.render=void 0,a.ui=void 0,a.setting=(new I).getSettings(n),a.block=t,a}return Object(g.a)(i,[{key:"destroy",value:function(){this.ui.destroy(),this.block.remove()}},{key:"update",value:function(){this.render.update(),this.pages.show()}},{key:"loadFromImages",value:function(t){var e=this;this.ui=new _(this.block,this,this.setting);var i=this.ui.getCanvas();this.render=new z(this,this.setting,i),this.flipController=new D(this.render,this),this.pages=new M(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout((function(){e.ui.update(),e.trigger("init",e,{page:e.setting.startPage,mode:e.render.getOrientation()})}),1)}},{key:"loadFromHTML",value:function(t){var e=this;this.ui=new G(this.block,this,this.setting,t),this.render=new K(this,this.setting,this.ui.getDistElement()),this.flipController=new D(this.render,this),this.pages=new W(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout((function(){e.ui.update(),e.trigger("init",e,{page:e.setting.startPage,mode:e.render.getOrientation()})}),1)}},{key:"updateFromImages",value:function(t){var e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new M(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}},{key:"updateFromHtml",value:function(t){var e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new W(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}},{key:"turnToPrevPage",value:function(){this.pages.showPrev()}},{key:"turnToNextPage",value:function(){this.pages.showNext()}},{key:"turnToPage",value:function(t){this.pages.show(t)}},{key:"flipNext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.TOP;this.flipController.flipNext(t)}},{key:"flipPrev",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.TOP;this.flipController.flipPrev(t)}},{key:"flip",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.TOP;this.flipController.flipToPage(t,e)}},{key:"updateState",value:function(t){this.trigger("changeState",this,t)}},{key:"updatePageIndex",value:function(t){this.trigger("flip",this,t)}},{key:"updateOrientation",value:function(t){this.ui.setOrientationStyle(t),this.update(),this.trigger("changeOrientation",this,t)}},{key:"getPageCount",value:function(){return this.pages.getPageCount()}},{key:"getCurrentPageIndex",value:function(){return this.pages.getCurrentPageIndex()}},{key:"getPage",value:function(t){return this.pages.getPage(t)}},{key:"getRender",value:function(){return this.render}},{key:"getFlipController",value:function(){return this.flipController}},{key:"getOrientation",value:function(){return this.render.getOrientation()}},{key:"getBoundsRect",value:function(){return this.render.getRect()}},{key:"getSettings",value:function(){return this.setting}},{key:"getUI",value:function(){return this.ui}},{key:"getState",value:function(){return this.flipController.getState()}},{key:"getPageCollection",value:function(){return this.pages}},{key:"startUserTouch",value:function(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}},{key:"userMove",value:function(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&R.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}},{key:"userStop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}}]),i}(U)),V=function(t){Object(u.a)(i,t);var e=Object(d.a)(i);function i(){return Object(c.a)(this,i),e.apply(this,arguments)}return Object(g.a)(i,[{key:"componentDidMount",value:function(){this.pageFlip=new q(this.el,this.props),this.pageFlip.loadFromHTML(this.childRef),this.setHandlers()}},{key:"setHandlers",value:function(){var t=this;this.props.onFlip&&this.pageFlip.on("flip",(function(e){return t.props.onFlip(e)})),this.props.onChangeOrientation&&this.pageFlip.on("changeOrientation",(function(e){return t.props.onChangeOrientation(e)})),this.props.onChangeState&&this.pageFlip.on("changeState",(function(e){return t.props.onChangeState(e)})),this.props.onInit&&this.pageFlip.on("init",(function(e){return t.props.onInit(e)})),this.props.onUpdate&&this.pageFlip.on("update",(function(e){return t.props.onUpdate(e)}))}},{key:"componentWillUnmount",value:function(){this.pageFlip.destroy(),this.pageFlip=null}},{key:"componentDidUpdate",value:function(t){t.children!==this.props.children&&(this.pageFlip.off("flip"),this.pageFlip.off("changeOrientation"),this.pageFlip.off("changeState"),this.pageFlip.off("init"),this.pageFlip.off("update"),this.pageFlip.updateFromHtml(this.childRef),this.setHandlers())}},{key:"getPageFlip",value:function(){return this.pageFlip}},{key:"render",value:function(){var t=this;this.childRef=[];var e=r.a.Children.map(this.props.children,(function(e){return r.a.cloneElement(e,{ref:function(e){e&&t.childRef.push(e)}})}));return r.a.createElement("div",{ref:function(e){return t.el=e},className:this.props.className,style:this.props.style},e)}}]),i}(r.a.Component),Z=(i(39),r.a.forwardRef((function(t,e){return Object(s.jsx)("div",{className:"page page-cover page-cover-"+t.pos,ref:e,"data-density":"hard",children:Object(s.jsx)("div",{className:"page-content",children:Object(s.jsx)("h2",{children:t.children})})})}))),X=r.a.forwardRef((function(t,e){return Object(s.jsx)("div",{className:"page",ref:e,"data-density":"soft"|t.density,children:Object(s.jsxs)("div",{className:"page-content",children:[Object(s.jsxs)("h2",{className:"page-header",children:["Page header - ",t.number]}),Object(s.jsx)("div",{className:"page-image",style:{backgroundImage:"url(images/html/"+t.image+")"}}),Object(s.jsx)("div",{className:"page-text",children:t.children}),Object(s.jsx)("div",{className:"page-footer",children:t.number+1})]})})}));r.a.Component;l.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root")),x()}},[[40,1,2]]]);
//# sourceMappingURL=main.195702bb.chunk.js.map